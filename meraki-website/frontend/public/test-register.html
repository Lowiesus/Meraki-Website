<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Test Register</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; padding: 20px; }
    form { max-width: 600px; }
    label { display:block; margin-bottom:8px; }
    input, select { width:100%; padding:8px; margin-top:4px; }
    button { padding:8px 12px; margin-top:10px; }
    pre { background:#f3f3f3; padding:10px; }
  </style>
</head>
<body>
  <h1>Register User (Static Test Page)</h1>

  <form id="regForm">
    <label>Username
      <input name="user_username" required />
    </label>

    <label>Email
      <input name="user_email_address" type="email" required />
    </label>

    <label>Password
      <input name="user_password" type="password" required />
    </label>

    <label>Role
      <select name="user_role">
        <option>Admin</option>
        <option selected>Artist</option>
        <option>Programmer</option>
        <option>Craftsman</option>
      </select>
    </label>

    <label>Bio
      <input name="user_bios" />
    </label>

    <label>Social links
      <input name="user_social_links" />
    </label>

    <button type="submit">Register</button>
    <button type="button" id="listBtn">List users</button>
  </form>

  <h2>Response</h2>
  <pre id="output">(no output yet)</pre>

  <script>
    const output = document.getElementById('output');
    const apiBase = 'http://localhost:5000';

    document.getElementById('regForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const f = e.target;
      const body = {
        user_username: f.user_username.value,
        user_email_address: f.user_email_address.value,
        user_password: f.user_password.value,
        user_role: f.user_role.value,
        user_bios: f.user_bios.value,
        user_social_links: f.user_social_links.value,
      };

      output.textContent = 'Sending...';

      try {
        const res = await fetch(apiBase + '/api/users', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body),
        });
        const data = await res.json();
        output.textContent = JSON.stringify({ status: res.status, body: data }, null, 2);
      } catch (err) {
        output.textContent = 'Network error: ' + err.message;
      }
    });

    document.getElementById('listBtn').addEventListener('click', async () => {
      output.textContent = 'Loading...';
      try {
        const res = await fetch(apiBase + '/api/users');
        const data = await res.json();
        output.textContent = JSON.stringify({ status: res.status, body: data }, null, 2);
      } catch (err) {
        output.textContent = 'Network error: ' + err.message;
      }
    });
  </script>
</body>
</html>
